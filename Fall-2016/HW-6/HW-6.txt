| نیم سال اول ۹۵-۹۶    | مبانی برنامه نویسی | موعد تحویل: ۳ دی ۱۳۹۵ ساعت ۲۲:۰۰    |
|:---------------------|:------------------:|:-----------------------------------:|

# بازی ۱۵۹۷ تحت کنسول 

## تعريف مساله
یکی از بازی‌هایی كه در چند وقت اخير بسیار مورد توجه قرار گرفته است (بخصوص در گوشی‌های موبایل) بازی بسيار ساده‌ ۲۰۴۸ است. در اين بازی شما با حركت دادن اعداد و ادغام كردن دو عدد مشابه (كه همه اعداد توانی از 2 هستند) يک عدد بزرگتر كه برابر حاصل جمع آن دو عدد است می‌سازيد (مثلا ادغام ۴ و ۴ عدد ۸ را می‌سازيد). با هر حركت عدد ۲ نيز در یک خانه خالی اضافه می‌شود. بازی زمانی تمام می‌شود كه همه خانه‌های جدول پر باشد و امكان ادغام هيچ دو عدد نباشد يا اينكه به عدد ۲۰۴۸ برسید.
حتما شما هم اين بازی رو بازی كرديد. اگر قبلا با اين بازی آشنا نيستيد می‌تونيد اينجا http://gabrielecirulli.github.io/2048 به صورت برخط بازی كنيد.
یک بازی دیگر که به اندازه‌ی بازی ۲۰۴۸ شهرت ندارد و به احتمال زیاد تا به حال هم شما با آن بازی نکرده‌اید نسخه‌ای از بازی ۲۰۴۸ به نام ۱۵۹۷ می‌باشد، در این بازی به جای توان‌های ۲ از جملات دنباله‌ی فیبوناچی استفاده می‌شود، به این ترتیب که هر بار دو جمله متوالی از دنباله‌ی فیبوناچی می‌توانند با هم ادغام شوند و جمله‌ی بعد را تولید نمایند. در این بازی در هر حرکت عدد ۱ در یک خانه‌ی خالی به صورت تصادفی اضافه می‌گردد. بازی زمانی تمام می‌شود كه همه خانه‌های جدول پر باشد و امكان ادغام هيچ دو عدد نباشد يا اينكه به عدد ۱۵۹۷ برسید.
این بازی جدید را نیز می‌توانید به صورت برخط اینجا https://jmhummel.github.io/1597 بازی کنید.
هدف از اين تمرين پياده‌سازی اين بازی به صورت تحت کنسول است:
۱. در ابتدا اجرای برنامه اندازه ماتريس از كاربر گرفته می‌شود. با وارد كردن عدد n بازی در یک ماتريس n x n انجام می‌شود. n حداقل ۴ و حداكثر ۸ می‌تواند باشد.
۲. برای حرکت در جهت‌ها از حروف L و K و J و I (البته حروف كوچک) به ترتيب برای سمت راست و پايين و چپ و بالا استفاده می‌شود.
۳. حداكثر يك حركت (آخرين حركت) را می‌توان undo كرد كه اين با وارد كردن حرف u انجام می‌شود.
۴. وارد كردن حرف q برنامه را خاتمه می‌دهد.

## نکات پیاده‌سازی
۱. دقت کنید که با بزرگ شدن اعداد نمایش جدول بهم نریزد.
۲. در يك حركت ممكن است بيشتر از یک ادغام وجود داشته باشد. برای مثال در جدول زير اگر حركت به سمت چپ انجام شود، ۱ و ۱ باهم ادغام می‌شوند و ۲ و ۳ نیز باهم و حالت جدول به صورت زير تغيير می‌یابد:

| ستون ۱ | ستون ۲ | ستون ۳ | ستون ۴ |
|:-:|:-:|:-:|:-:|
| - | ۱ | ۱ | ۳ |
| - | ۳ | ۸ | - |
| - | - | ۳ | ۲ |
| - | - | ۱ | - |

حرکت به سمت راست

| ستون ۱ | ستون ۲ | ستون ۳ | ستون ۴ |
|:-:|:-:|:-:|:-:|
| ۲ | ۳ | - | - |
| ۳ | ۸ | - | - |
| ۵ | - | - | - |
| ۱ | - | - | - |

۳. اعدادی كه با ادغام ساير اعداد در اين حركت توليد شده‌اند (با يكديگر و با اعدادی كه از قبل وجود دارند) ادغام نمی‌شوند. برای مثال در شكل زیر  با حركت به سمت پايين دو عدد ۲ و ۳ تازه توليد می‌شوند ولی باهم ادغام نمی‌شود.

| ستون ۱ | ستون ۲ | ستون ۳ | ستون ۴ |
|:-:|:-:|:-:|:-:|
| - | - | ۱ | - |
| - | - | ۱ | - |
| - | - | ۱ | - |
| - | - | ۲ | - |

حرکت به سمت پایین

| ستون ۱ | ستون ۲ | ستون ۳ | ستون ۴ |
|:-:|:-:|:-:|:-:|
| - | - | - | - |
| - | - | - | - |
| - | - | ۲ | - |
| - | - | ۳ | - |

## موارد امتیازی
۱. امکان undo کردن تا ۱۰ حرکت وجود داشته باشد.
۲. امکان جابجایی و حرکت با استفاده از arrow keys وجود داشته باشد.
۳. تعمیم بازی به یک رابطه‌ی کلی تر به صورت:
$$
f(n) = a * f(n - 1) + b * f(n - 2)
$$
$$
f(1) = 1,  f(2) = 2
$$
که ضرایب a و b از کاربر در ابتدای بازی گرفته می‌شوند. در این بازی تعمیم‌یافته می‌بایست عدد ۱ و ۲ به صورت تصادفی در حرکت تولید شوند.